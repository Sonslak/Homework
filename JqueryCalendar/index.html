<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Javascript Calendar</title>

    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open Sans" />
    <style type="text/css">
        body {
            font-family: 'Open Sans', serif;
            font-size: 12px;
        }

        div.container {
            text-align: center;
        }

        div.buttons {
            width: 25%;
            margin-left: auto;
            margin-right: auto;
        }

            div.buttons div#current-month {
                width: 50%;
                float: left;
                padding-bottom: 3px;
            }

            div.buttons a#next {
                width: 25%;
                float: left;
                padding-bottom: 3px;
                text-align: right;
            }

            div.buttons a#prev {
                width: 25%;
                padding-bottom: 3px;
                float: left;
                text-align: left;
            }

        .calendar td.today {
            background-color: #005fbf;
            color: white;
            font-weight: 200;
        }

        .calendar-container {
            margin: 0px;
            padding: 0px;
            width: 25%;
            box-shadow: 10px 10px 5px #888888;
            border: 1px solid #000000;
            -moz-border-radius-bottomleft: 3px;
            -webkit-border-bottom-left-radius: 3px;
            border-bottom-left-radius: 3px;
            -moz-border-radius-bottomright: 3px;
            -webkit-border-bottom-right-radius: 3px;
            border-bottom-right-radius: 3px;
            -moz-border-radius-topright: 3px;
            -webkit-border-top-right-radius: 3px;
            border-top-right-radius: 3px;
            -moz-border-radius-topleft: 3px;
            -webkit-border-top-left-radius: 3px;
            border-top-left-radius: 3px;
            margin-left: auto;
            margin-right: auto;
        }

            .calendar-container table {
                border-collapse: collapse;
                border-spacing: 0;
                width: 100%;
                height: 100%;
                margin: 0px;
                padding: 0px;
            }

            .calendar-container tr:last-child td:last-child {
                -moz-border-radius-bottomright: 3px;
                -webkit-border-bottom-right-radius: 3px;
                border-bottom-right-radius: 3px;
            }

            .calendar-container table tr:first-child td:first-child {
                -moz-border-radius-topleft: 3px;
                -webkit-border-top-left-radius: 3px;
                border-top-left-radius: 3px;
            }

            .calendar-container table tr:first-child td:last-child {
                -moz-border-radius-topright: 3px;
                -webkit-border-top-right-radius: 3px;
                border-top-right-radius: 3px;
            }

            .calendar-container tr:last-child td:first-child {
                -moz-border-radius-bottomleft: 3px;
                -webkit-border-bottom-left-radius: 3px;
                border-bottom-left-radius: 3px;
            }

            .calendar-container tr:hover td {
                /*background-color: #ffffff;*/
            }

            .calendar-container td {
                vertical-align: middle;
                background-color: #ffffff;
                border: 1px solid #000000;
                border-width: 0px 1px 1px 0px;
                text-align: center;
                padding: 7px;
                color: #000000;
            }

            .calendar-container tr:last-child td {
                border-width: 0px 1px 0px 0px;
            }

            .calendar-container tr td:last-child {
                border-width: 0px 0px 1px 0px;
            }

            .calendar-container tr:last-child td:last-child {
                border-width: 0px 0px 0px 0px;
            }

            .calendar-container tr:first-child td {
                background: -o-linear-gradient(bottom, #005fbf 5%, #003f7f 100%);
                background: -webkit-gradient( linear, left top, left bottom, color-stop(0.05, #005fbf), color-stop(1, #003f7f) );
                background: -moz-linear-gradient( center top, #005fbf 5%, #003f7f 100% );
                filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#005fbf", endColorstr="#003f7f");
                background: -o-linear-gradient(top,#005fbf,003f7f);
                background-color: #005fbf;
                border: 0px solid #000000;
                text-align: center;
                border-width: 0px 0px 1px 1px;
                color: #ffffff;
            }

                .calendar-container tr:first-child td:first-child {
                    border-width: 0px 0px 1px 0px;
                }

                .calendar-container tr:first-child td:last-child {
                    border-width: 0px 0px 1px 1px;
                }
    </style>
</head>
<body>
    <div class="container">
        <h1>Javascript Calendar</h1>
        <div class="buttons">
            <a href="#" id="prev" data-date=""><< Prev</a>
            <div id="current-month"></div>
            <a href="#" id="next" data-date="">Next >></a>
        </div>
        <div style="clear:both"></div>
        <div class="calendar-container">
            <table id="calendar" class="calendar"></table>

        </div>

    </div>
</body>
</html>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

<script>

    $(document).ready(function () {
        var cal = new Calendar();
        cal.init();
        cal.buildCalendar(new Date());

        $("#next").on("click", function () { cal.showNextMonth(event); });
        $("#prev").on("click", function () { cal.showPrevMonth(event); });
    });


    function Calendar() {
        var base = this;
        var nextBtn = $("#next");
        var prevBtn = $("#prev");

        // public functions
        base.init = function () { };

        base.buildCalendar = function (today) {

            // variables
            var day = 1;
            var daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate()
            var currentDate = new Date();

            // get the first day of the month
            var firstDay = new Date(today);
            firstDay.setDate(1);

            $("#current-month").html(base.getMonthName(today.getMonth()) + " " + today.getFullYear());

            calendarHtml = "<tr><td>Mon</td><td>Tue</td><td>Wed</td><td>Thu</td><td>Fri</td><td>Sat</td><td>Sun</td></tr>";

            var arrWeeks = [];

            // weeks
            for (i = 0; i < 6; i++) {
                var arrDays = [];
                // days
                for (j = 0; j < 7; j++) {
                    if ((i == 0 && j < firstDay.getDay()) || (day > daysInMonth)) {    
                        arrDays[j] = '0'                     
                    }
                    else {
                        arrDays[j] = day;
                        // increment day counter
                        day++;
                    }
                }

                arrWeeks[i] = arrDays;

                // end of row; determine if more rows needed
                if (day > daysInMonth) {i = 6;}
            }

            // days
            for (j = 0; j < arrWeeks.length; j++) {

                calendarHtml += "<tr>";

                for (i = 0; i < arrWeeks[j].length ; i++) {    
                    if (arrWeeks[j][i] == 0) {
                        // this puts in blank cells at the beginning an end of the month
                        calendarHtml += "<td>&nbsp;</td>";
                    }
                    else{
                        if (arrWeeks[j][i] == today.getDate() && currentDate.getMonth() == today.getMonth() && currentDate.getYear() == today.getYear()) {
                            // display the date for this cell
                            calendarHtml += "<td class='today'>" + arrWeeks[j][i] + "</td>";
                        }
                        else {
                            // display the date for this cell
                            calendarHtml += "<td>" + arrWeeks[j][i] + "</td>";
                        }
                    }
                }

                calendarHtml += "</tr>"
            }

            $("#calendar").html(calendarHtml);

            var nextMonth = new Date();
            nextMonth.setMonth(today.getMonth() + 1);
            nextBtn.attr('data-date', $.datepicker.formatDate('dd/mm/yy', nextMonth));

            var prevMonth = new Date();
            prevMonth.setMonth(today.getMonth() - 1);
            prevBtn.attr('data-date', $.datepicker.formatDate('dd/mm/yy', prevMonth));
        };


        base.getMonthName = function (month) {
            var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            return months[month];
        }

        base.log = function (message) {
            console.log(message);
        };

        // events
        base.showNextMonth = function (event) {
            event.preventDefault();
            base.buildCalendar($.datepicker.parseDate('dd/mm/yy', nextBtn.attr('data-date')));
        };

        base.showPrevMonth = function (event) {
            event.preventDefault();
            base.buildCalendar($.datepicker.parseDate('dd/mm/yy', prevBtn.attr('data-date')));
        };


    }

</script>
